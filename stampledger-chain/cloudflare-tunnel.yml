# Cloudflare Tunnel configuration for StampLedger Blockchain Node
#
# Setup Instructions:
# 1. Install cloudflared: https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/install-and-setup/installation/
# 2. Login: cloudflared tunnel login
# 3. Create tunnel: cloudflared tunnel create stampledger-chain
# 4. Route DNS: cloudflared tunnel route dns stampledger-chain rpc.stampledger.com
# 5. Copy the tunnel credentials file to ~/.cloudflared/<TUNNEL_ID>.json
# 6. Update the tunnel ID below
# 7. Run: cloudflared tunnel --config cloudflare-tunnel.yml run

tunnel: <TUNNEL_ID>  # Replace with your tunnel ID
credentials-file: ~/.cloudflared/<TUNNEL_ID>.json  # Replace with your credentials file path

ingress:
  # Tendermint RPC (for external queries)
  - hostname: rpc.stampledger.com
    service: http://localhost:26657
    originRequest:
      noTLSVerify: true

  # Tendermint P2P (for node communication) - optional, only if running public validator
  # - hostname: p2p.stampledger.com
  #   service: tcp://localhost:26656

  # REST API (Cosmos SDK REST endpoints)
  - hostname: api.stampledger.com
    service: http://localhost:1317
    originRequest:
      noTLSVerify: true

  # gRPC (for programmatic access)
  - hostname: grpc.stampledger.com
    service: grpc://localhost:9090

  # Catch-all rule (required)
  - service: http_status:404
