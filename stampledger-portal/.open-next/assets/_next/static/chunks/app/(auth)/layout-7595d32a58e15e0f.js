(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[97],{1090:(e,t,r)=>{Promise.resolve().then(r.bind(r,7156))},2895:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(2115),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(e,t)=>{let r=(0,o.forwardRef)((r,n)=>{let{color:s="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:u,className:c="",children:h,...d}=r;return(0,o.createElement)("svg",{ref:n,...a,width:i,height:i,stroke:s,strokeWidth:u?24*Number(l)/Number(i):l,className:["lucide","lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()),c].join(" "),...d},[...t.map(e=>{let[t,r]=e;return(0,o.createElement)(t,r)}),...Array.isArray(h)?h:[h]])});return r.displayName="".concat(e),r}},5695:(e,t,r)=>{"use strict";var o=r(8999);r.o(o,"usePathname")&&r.d(t,{usePathname:function(){return o.usePathname}}),r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}})},6052:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,AuthProvider:()=>i});var o=r(5155),a=r(2115),n=r(5695);let s=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,a.useState)(null),[l,u]=(0,a.useState)(null),[c,h]=(0,a.useState)(!0),d=(0,n.useRouter)();(0,a.useEffect)(()=>{let e=localStorage.getItem("token");e?(u(e),m(e)):h(!1)},[]);let m=async e=>{try{let t=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();i(e.user)}else localStorage.removeItem("token"),u(null)}catch(e){console.error("Failed to fetch user:",e),localStorage.removeItem("token"),u(null)}finally{h(!1)}},f=async(e,t)=>{let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!r.ok)throw Error((await r.json()).error||"Login failed");let o=await r.json();localStorage.setItem("token",o.token),u(o.token),i(o.user),d.push("/")},p=async e=>{let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Registration failed");let r=await t.json();localStorage.setItem("token",r.token),u(r.token),i(r.user),d.push("/")};return(0,o.jsx)(s.Provider,{value:{user:r,token:l,loading:c,login:f,register:p,logout:()=>{localStorage.removeItem("token"),u(null),i(null),d.push("/login")}},children:t})}function l(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7156:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var o=r(5155),a=r(2115),n=r(5695),s=r(6052),i=r(7624);function l(e){let{children:t}=e,{user:r,loading:l}=(0,s.A)(),u=(0,n.useRouter)();return((0,a.useEffect)(()=>{!l&&r&&u.push("/")},[r,l,u]),l)?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,o.jsx)(i.A,{className:"h-8 w-8 animate-spin text-primary"})}):r?null:(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4",children:(0,o.jsx)("div",{className:"w-full max-w-md",children:t})})}},7624:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(2895).A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}},e=>{e.O(0,[441,964,358],()=>e(e.s=1090)),_N_E=e.O()}]);