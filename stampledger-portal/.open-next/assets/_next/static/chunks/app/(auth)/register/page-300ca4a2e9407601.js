(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[678],{1705:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var r=a(5155),s=a(2115),l=a(6874),i=a.n(l),n=a(6052),o=a(7168),d=a(9852),c=a(5784),u=a(5525),h=a(7624);let m=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];function p(){let{register:e}=(0,n.A)(),[t,a]=(0,s.useState)({email:"",password:"",confirmPassword:"",name:"",peLicenseNumber:"",peState:""}),[l,p]=(0,s.useState)(""),[f,b]=(0,s.useState)(!1),g=e=>{a({...t,[e.target.name]:e.target.value})},x=async a=>{if(a.preventDefault(),p(""),t.password!==t.confirmPassword)return void p("Passwords do not match");if(t.password.length<8)return void p("Password must be at least 8 characters");b(!0);try{await e({email:t.email,password:t.password,name:t.name,peLicenseNumber:t.peLicenseNumber||void 0,peState:t.peState||void 0})}catch(e){p(e instanceof Error?e.message:"Registration failed")}finally{b(!1)}};return(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"flex justify-center mb-4",children:(0,r.jsx)("div",{className:"bg-primary/10 p-3 rounded-full",children:(0,r.jsx)(u.A,{className:"h-8 w-8 text-primary"})})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-primary",children:"Create Account"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Register your PE account on StampLedger"})]}),(0,r.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[l&&(0,r.jsx)("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:l}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"input-label",children:"Full Name"}),(0,r.jsx)(d.p,{id:"name",name:"name",type:"text",placeholder:"John Smith, PE",value:t.name,onChange:g,required:!0,disabled:f})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"input-label",children:"Email"}),(0,r.jsx)(d.p,{id:"email",name:"email",type:"email",placeholder:"you@example.com",value:t.email,onChange:g,required:!0,disabled:f})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"peState",className:"input-label",children:"PE State"}),(0,r.jsxs)(c.l,{id:"peState",name:"peState",value:t.peState,onChange:g,disabled:f,children:[(0,r.jsx)("option",{value:"",children:"Select state"}),m.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"peLicenseNumber",className:"input-label",children:"PE License #"}),(0,r.jsx)(d.p,{id:"peLicenseNumber",name:"peLicenseNumber",type:"text",placeholder:"123456",value:t.peLicenseNumber,onChange:g,disabled:f})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"input-label",children:"Password"}),(0,r.jsx)(d.p,{id:"password",name:"password",type:"password",placeholder:"At least 8 characters",value:t.password,onChange:g,required:!0,disabled:f})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"input-label",children:"Confirm Password"}),(0,r.jsx)(d.p,{id:"confirmPassword",name:"confirmPassword",type:"password",placeholder:"Confirm your password",value:t.confirmPassword,onChange:g,required:!0,disabled:f})]}),(0,r.jsx)(o.$,{type:"submit",className:"w-full",disabled:f,children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Create Account"})]}),(0,r.jsxs)("p",{className:"text-center text-gray-600 mt-6",children:["Already have an account?"," ",(0,r.jsx)(i(),{href:"/login",className:"text-cta hover:underline font-medium",children:"Sign in"})]})]})}},2780:(e,t,a)=>{Promise.resolve().then(a.bind(a,1705))},3999:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var r=a(2596),s=a(9688);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},5525:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(2895).A)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},5784:(e,t,a)=>{"use strict";a.d(t,{l:()=>i});var r=a(5155),s=a(2115),l=a(3999);let i=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsx)("select",{className:(0,l.cn)("flex h-12 w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-base ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cta focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...i,children:s})});i.displayName="Select"},6052:(e,t,a)=>{"use strict";a.d(t,{A:()=>o,AuthProvider:()=>n});var r=a(5155),s=a(2115),l=a(5695);let i=(0,s.createContext)(void 0);function n(e){let{children:t}=e,[a,n]=(0,s.useState)(null),[o,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(!0),h=(0,l.useRouter)();(0,s.useEffect)(()=>{let e=localStorage.getItem("token");e?(d(e),m(e)):u(!1)},[]);let m=async e=>{try{let t=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();n(e.user)}else localStorage.removeItem("token"),d(null)}catch(e){console.error("Failed to fetch user:",e),localStorage.removeItem("token"),d(null)}finally{u(!1)}},p=async(e,t)=>{let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!a.ok)throw Error((await a.json()).error||"Login failed");let r=await a.json();localStorage.setItem("token",r.token),d(r.token),n(r.user),h.push("/")},f=async e=>{let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Registration failed");let a=await t.json();localStorage.setItem("token",a.token),d(a.token),n(a.user),h.push("/")};return(0,r.jsx)(i.Provider,{value:{user:a,token:o,loading:c,login:p,register:f,logout:()=>{localStorage.removeItem("token"),d(null),n(null),h.push("/login")}},children:t})}function o(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7168:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var r=a(5155),s=a(2115),l=a(2085),i=a(3999);let n=(0,l.F)("inline-flex items-center justify-center rounded-lg font-semibold transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-cta text-white hover:bg-cta-hover shadow-md hover:shadow-lg focus-visible:ring-cta",secondary:"border-2 border-primary text-primary hover:bg-primary hover:text-white",outline:"border-2 border-gray-300 text-gray-700 hover:bg-gray-50",ghost:"hover:bg-gray-100 text-gray-700",link:"text-cta underline-offset-4 hover:underline",accent:"bg-accent text-white hover:bg-accent-dark shadow-md hover:shadow-lg",teal:"bg-secondary text-white hover:bg-secondary-dark shadow-md hover:shadow-lg",danger:"bg-red-600 text-white hover:bg-red-700 shadow-md hover:shadow-lg"},size:{default:"px-6 py-3",sm:"px-4 py-2 text-sm",lg:"px-8 py-4 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:s,size:l,...o}=e;return(0,r.jsx)("button",{className:(0,i.cn)(n({variant:s,size:l,className:a})),ref:t,...o})});o.displayName="Button"},7624:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(2895).A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9852:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var r=a(5155),s=a(2115),l=a(3999);let i=s.forwardRef((e,t)=>{let{className:a,type:s,...i}=e;return(0,r.jsx)("input",{type:s,className:(0,l.cn)("flex h-12 w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-base ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cta focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...i})});i.displayName="Input"}},e=>{e.O(0,[987,874,441,964,358],()=>e(e.s=2780)),_N_E=e.O()}]);