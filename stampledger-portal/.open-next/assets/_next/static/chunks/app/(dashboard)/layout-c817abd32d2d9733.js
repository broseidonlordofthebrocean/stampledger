(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{1007:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2523:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("Stamp",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M19.27 13.73A2.5 2.5 0 0 0 17.5 13h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1.5c0-.66-.26-1.3-.73-1.77Z",key:"1sy9ra"}],["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-3-3c-1.66 0-3 1-3 3s1 2 1 3.5V13",key:"cnxgux"}]])},2775:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]])},3126:(e,t,s)=>{Promise.resolve().then(s.bind(s,5422))},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(2596),a=s(9688);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},4416:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5422:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var r=s(5155),a=s(2115),i=s(5695),l=s(6052),n=s(6874),h=s.n(n),o=s(3999),c=s(2895);let d=(0,c.A)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var x=s(2523),m=s(7434),u=s(2775),y=s(5525),f=s(1007);let p=(0,c.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var v=s(4416);let g=(0,c.A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var w=s(7168);let b=[{href:"/",label:"Dashboard",icon:d},{href:"/stamps",label:"Stamps",icon:x.A},{href:"/documents",label:"Documents",icon:m.A},{href:"/specs",label:"Specifications",icon:u.A}];function j(){let e=(0,i.usePathname)(),{user:t,logout:s}=(0,l.A)(),[n,c]=(0,a.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("aside",{className:"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0 bg-primary",children:(0,r.jsxs)("div",{className:"flex flex-col flex-1 min-h-0",children:[(0,r.jsxs)("div",{className:"flex items-center h-16 px-4 border-b border-primary-light",children:[(0,r.jsx)(y.A,{className:"h-8 w-8 text-white"}),(0,r.jsx)("span",{className:"ml-2 text-xl font-bold text-white",children:"StampLedger"})]}),(0,r.jsx)("nav",{className:"flex-1 px-2 py-4 space-y-1",children:b.map(t=>{let s=e===t.href||"/"!==t.href&&e.startsWith(t.href);return(0,r.jsxs)(h(),{href:t.href,className:(0,o.cn)("flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors",s?"bg-white/20 text-white":"text-white/70 hover:bg-white/10 hover:text-white"),children:[(0,r.jsx)(t.icon,{className:"h-5 w-5 mr-3"}),t.label]},t.href)})}),(0,r.jsxs)("div",{className:"border-t border-primary-light p-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"bg-white/20 p-2 rounded-full",children:(0,r.jsx)(f.A,{className:"h-5 w-5 text-white"})}),(0,r.jsxs)("div",{className:"ml-3 flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-white truncate",children:null==t?void 0:t.name}),(0,r.jsx)("p",{className:"text-xs text-white/60 truncate",children:(null==t?void 0:t.peLicenseNumber)?"PE ".concat(t.peState,"-").concat(t.peLicenseNumber):null==t?void 0:t.email})]})]}),(0,r.jsxs)("button",{onClick:s,className:"mt-4 flex items-center w-full px-4 py-2 text-sm text-white/70 hover:text-white hover:bg-white/10 rounded-lg transition-colors",children:[(0,r.jsx)(p,{className:"h-4 w-4 mr-2"}),"Sign out"]})]})]})}),(0,r.jsx)("div",{className:"md:hidden fixed top-0 left-0 right-0 z-40 bg-primary",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16 px-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(y.A,{className:"h-8 w-8 text-white"}),(0,r.jsx)("span",{className:"ml-2 text-xl font-bold text-white",children:"StampLedger"})]}),(0,r.jsx)("button",{onClick:()=>c(!n),className:"text-white p-2",children:n?(0,r.jsx)(v.A,{className:"h-6 w-6"}):(0,r.jsx)(g,{className:"h-6 w-6"})})]})}),n&&(0,r.jsxs)("div",{className:"md:hidden fixed inset-0 z-30 bg-primary pt-16",children:[(0,r.jsx)("nav",{className:"px-4 py-4 space-y-1",children:b.map(t=>{let s=e===t.href||"/"!==t.href&&e.startsWith(t.href);return(0,r.jsxs)(h(),{href:t.href,onClick:()=>c(!1),className:(0,o.cn)("flex items-center px-4 py-3 text-base font-medium rounded-lg transition-colors",s?"bg-white/20 text-white":"text-white/70 hover:bg-white/10 hover:text-white"),children:[(0,r.jsx)(t.icon,{className:"h-5 w-5 mr-3"}),t.label]},t.href)})}),(0,r.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 border-t border-primary-light p-4",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("div",{className:"bg-white/20 p-2 rounded-full",children:(0,r.jsx)(f.A,{className:"h-5 w-5 text-white"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-white",children:null==t?void 0:t.name}),(0,r.jsx)("p",{className:"text-xs text-white/60",children:null==t?void 0:t.email})]})]}),(0,r.jsxs)(w.$,{variant:"outline",onClick:s,className:"w-full border-white/30 text-white hover:bg-white/10",children:[(0,r.jsx)(p,{className:"h-4 w-4 mr-2"}),"Sign out"]})]})]})]})}var k=s(7624);function N(e){let{children:t}=e,{user:s,loading:n}=(0,l.A)(),h=(0,i.useRouter)();return((0,a.useEffect)(()=>{n||s||h.push("/login")},[s,n,h]),n)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)(k.A,{className:"h-8 w-8 animate-spin text-primary"})}):s?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(j,{}),(0,r.jsx)("main",{className:"md:pl-64 pt-16 md:pt-0",children:(0,r.jsx)("div",{className:"p-4 md:p-8",children:t})})]}):null}},5525:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},6052:(e,t,s)=>{"use strict";s.d(t,{A:()=>h,AuthProvider:()=>n});var r=s(5155),a=s(2115),i=s(5695);let l=(0,a.createContext)(void 0);function n(e){let{children:t}=e,[s,n]=(0,a.useState)(null),[h,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),x=(0,i.useRouter)();(0,a.useEffect)(()=>{let e=localStorage.getItem("token");e?(o(e),m(e)):d(!1)},[]);let m=async e=>{try{let t=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();n(e.user)}else localStorage.removeItem("token"),o(null)}catch(e){console.error("Failed to fetch user:",e),localStorage.removeItem("token"),o(null)}finally{d(!1)}},u=async(e,t)=>{let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!s.ok)throw Error((await s.json()).error||"Login failed");let r=await s.json();localStorage.setItem("token",r.token),o(r.token),n(r.user),x.push("/")},y=async e=>{let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Registration failed");let s=await t.json();localStorage.setItem("token",s.token),o(s.token),n(s.user),x.push("/")};return(0,r.jsx)(l.Provider,{value:{user:s,token:h,loading:c,login:u,register:y,logout:()=>{localStorage.removeItem("token"),o(null),n(null),x.push("/login")}},children:t})}function h(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7168:(e,t,s)=>{"use strict";s.d(t,{$:()=>h});var r=s(5155),a=s(2115),i=s(2085),l=s(3999);let n=(0,i.F)("inline-flex items-center justify-center rounded-lg font-semibold transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-cta text-white hover:bg-cta-hover shadow-md hover:shadow-lg focus-visible:ring-cta",secondary:"border-2 border-primary text-primary hover:bg-primary hover:text-white",outline:"border-2 border-gray-300 text-gray-700 hover:bg-gray-50",ghost:"hover:bg-gray-100 text-gray-700",link:"text-cta underline-offset-4 hover:underline",accent:"bg-accent text-white hover:bg-accent-dark shadow-md hover:shadow-lg",teal:"bg-secondary text-white hover:bg-secondary-dark shadow-md hover:shadow-lg",danger:"bg-red-600 text-white hover:bg-red-700 shadow-md hover:shadow-lg"},size:{default:"px-6 py-3",sm:"px-4 py-2 text-sm",lg:"px-8 py-4 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,...h}=e;return(0,r.jsx)("button",{className:(0,l.cn)(n({variant:a,size:i,className:s})),ref:t,...h})});h.displayName="Button"},7434:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},7624:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2895).A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}},e=>{e.O(0,[987,874,441,964,358],()=>e(e.s=3126)),_N_E=e.O()}]);