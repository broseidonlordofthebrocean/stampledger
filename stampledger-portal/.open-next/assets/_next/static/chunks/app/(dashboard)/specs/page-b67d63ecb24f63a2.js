(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{2775:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(2895).A)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]])},3999:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var s=a(2596),r=a(9688);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},4416:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(2895).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4616:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(2895).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5102:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(5155),r=a(2115),i=a(6874),l=a.n(i),n=a(6052),o=a(7168),c=a(9852),d=a(4616),h=a(7624),u=a(2775),m=a(2895);let x=(0,m.A)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),f=(0,m.A)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);var p=a(4416);function g(){let{token:e}=(0,n.A)(),[t,a]=(0,r.useState)([]),[i,m]=(0,r.useState)(!0),[g,y]=(0,r.useState)(!1),[v,j]=(0,r.useState)(""),[b,w]=(0,r.useState)(""),[N,k]=(0,r.useState)(!1);(0,r.useEffect)(()=>{A()},[e]);let A=async()=>{if(e)try{let t=await fetch("/api/specs/projects",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();a(e.projects)}}catch(e){console.error("Failed to fetch projects:",e)}finally{m(!1)}},S=async()=>{if(e&&v){k(!0);try{(await fetch("/api/specs/projects",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({name:v,description:b||null})})).ok&&(await A(),y(!1),j(""),w(""))}catch(e){console.error("Failed to create project:",e)}finally{k(!1)}}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"page-header mb-0",children:"Specifications"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Track specification versions with blockchain-verified history"})]}),(0,s.jsxs)(o.$,{onClick:()=>y(!0),children:[(0,s.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"New Project"]})]}),i?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)(h.A,{className:"h-8 w-8 animate-spin text-primary"})}):0===t.length?(0,s.jsxs)("div",{className:"card text-center py-12",children:[(0,s.jsx)(u.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"No projects yet"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Create your first specification project to start tracking versions"}),(0,s.jsxs)(o.$,{onClick:()=>y(!0),className:"mt-4",children:[(0,s.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"New Project"]})]}):(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(e=>(0,s.jsx)(l(),{href:"/specs/".concat(e.id),children:(0,s.jsx)("div",{className:"card-hover h-full",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"bg-accent/10 p-3 rounded-lg",children:(0,s.jsx)(x,{className:"h-6 w-6 text-accent"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 truncate",children:e.name}),e.description&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-3 text-sm text-gray-500",children:[(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(f,{className:"h-3 w-3 mr-1"}),e.versionCount," version",1!==e.versionCount?"s":""]}),e.latestVersion&&(0,s.jsxs)("span",{className:"font-mono text-xs bg-gray-100 px-2 py-0.5 rounded",children:["v",e.latestVersion]})]})]})]})})},e.id))}),g&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Create New Project"}),(0,s.jsx)("button",{onClick:()=>y(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,s.jsx)(p.A,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"input-label",children:"Project Name *"}),(0,s.jsx)(c.p,{placeholder:"e.g., Building A Structural Plans",value:v,onChange:e=>j(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"input-label",children:"Description"}),(0,s.jsx)("textarea",{className:"flex w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-base placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cta focus-visible:ring-offset-2",rows:3,placeholder:"Brief description of the project...",value:b,onChange:e=>w(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end mt-6",children:[(0,s.jsx)(o.$,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),(0,s.jsx)(o.$,{onClick:S,disabled:!v||N,children:N?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):"Create Project"})]})]})})]})}},6052:(e,t,a)=>{"use strict";a.d(t,{A:()=>o,AuthProvider:()=>n});var s=a(5155),r=a(2115),i=a(5695);let l=(0,r.createContext)(void 0);function n(e){let{children:t}=e,[a,n]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),[d,h]=(0,r.useState)(!0),u=(0,i.useRouter)();(0,r.useEffect)(()=>{let e=localStorage.getItem("token");e?(c(e),m(e)):h(!1)},[]);let m=async e=>{try{let t=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();n(e.user)}else localStorage.removeItem("token"),c(null)}catch(e){console.error("Failed to fetch user:",e),localStorage.removeItem("token"),c(null)}finally{h(!1)}},x=async(e,t)=>{let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!a.ok)throw Error((await a.json()).error||"Login failed");let s=await a.json();localStorage.setItem("token",s.token),c(s.token),n(s.user),u.push("/")},f=async e=>{let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Registration failed");let a=await t.json();localStorage.setItem("token",a.token),c(a.token),n(a.user),u.push("/")};return(0,s.jsx)(l.Provider,{value:{user:a,token:o,loading:d,login:x,register:f,logout:()=>{localStorage.removeItem("token"),c(null),n(null),u.push("/login")}},children:t})}function o(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7168:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var s=a(5155),r=a(2115),i=a(2085),l=a(3999);let n=(0,i.F)("inline-flex items-center justify-center rounded-lg font-semibold transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-cta text-white hover:bg-cta-hover shadow-md hover:shadow-lg focus-visible:ring-cta",secondary:"border-2 border-primary text-primary hover:bg-primary hover:text-white",outline:"border-2 border-gray-300 text-gray-700 hover:bg-gray-50",ghost:"hover:bg-gray-100 text-gray-700",link:"text-cta underline-offset-4 hover:underline",accent:"bg-accent text-white hover:bg-accent-dark shadow-md hover:shadow-lg",teal:"bg-secondary text-white hover:bg-secondary-dark shadow-md hover:shadow-lg",danger:"bg-red-600 text-white hover:bg-red-700 shadow-md hover:shadow-lg"},size:{default:"px-6 py-3",sm:"px-4 py-2 text-sm",lg:"px-8 py-4 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,...o}=e;return(0,s.jsx)("button",{className:(0,l.cn)(n({variant:r,size:i,className:a})),ref:t,...o})});o.displayName="Button"},7624:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(2895).A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7629:(e,t,a)=>{Promise.resolve().then(a.bind(a,5102))},9852:(e,t,a)=>{"use strict";a.d(t,{p:()=>l});var s=a(5155),r=a(2115),i=a(3999);let l=r.forwardRef((e,t)=>{let{className:a,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:(0,i.cn)("flex h-12 w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-base ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cta focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});l.displayName="Input"}},e=>{e.O(0,[987,874,441,964,358],()=>e(e.s=7629)),_N_E=e.O()}]);